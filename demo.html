<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
      body {
        font-family: sans-serif;
        width: 400px;
      }

      * {
        box-sizing: border-box;
      }

      #myHeader {
        text-align: center;
        background-color: #fff;
        padding: 10px 20px;
      }

      #inputTask {
        border-radius: 5px;
        border-width: 2px;
      }

      #addButn:hover {
        color: green;
      }

      ul {
        margin: 0;
        padding: 0;
      }

      ul li {
        list-style-type: none;
        padding: 12px 8px 12px 40px;
        background-color: #fff;
        font-size: 20px;
      }

      ul li:nth-child(odd) {
        background-color: #bbb;
      }

      ul li:hover {
        background-color: lightblue;
      }

      .fa-close, .fa-edit, .fa-save {
        float: right;
      }

      .fa-close:hover {
        color: red;
      }

      .fa-edit:hover {
        color: blue;
      }

      .fa-save:hover {
        color: blue;
      }

      .editMode, .savedMode {
        display: none;
      }

      h3 {
        border-style : none none solid none;  
      }
    </style>

  </head>
  
  <body>
    <div id="myHeader">
      <h2>My To Do List</h2>
      <input id="inputTask" type="text" placeholder="Task...">
      <i id="addButn" onclick="addTask()" class="fa fa-check"></i>
    </div>
    
    <div>
      <h3>TODO</h3>
      <ul id="incomplete">
        <li> <input type="checkBox" class="checkBox" onchange="checking(this, this.parentElement.parentElement)"> <label>See Doctor</label>
        <input type="text" class="savedMode"> <i class="fa fa-close"></i> <i class="fa fa-edit" onclick="EditTask(this)"></i>
        </li>
        <li><input type="checkBox" class="checkBox" onchange="checking(this, this.parentElement.parentElement)"> <label>Meeting</label>
          <input type="text" class="savedMode"> <i class="fa fa-close"></i> <i class="fa fa-edit" onclick="EditTask(this)"></i>
        </li>
        <li>
          <input type="checkBox" class="checkBox" onchange="checking(this, this.parentElement.parentElement)"> <label>Football</label>
          <input type="text" class="savedMode"> <i class="fa fa-close"></i> <i class="fa fa-edit" onclick="EditTask(this)"></i>
        </li>
      </ul>
    </div>
    
    <h3>COMPLETED</h3>
    
    <ul id="completed">
      <li>
        <input type="checkBox" class="checkBox" onchange="checking(this, this.parentElement.parentElement)" checked> <label>Lunch</label>
          <input type="text" class="savedMode"> <i class="fa fa-close"></i> <i class="fa fa-edit" onclick="EditTask(this)"></i>
      </li>
    </ul>


<script>
      var closeButns = document.getElementsByClassName("fa fa-close");
      for (var i=0; i<closeButns.length; i++) {
        closeButns[i].onclick = function() {
          var parent = this.parentElement;
          parent.style.display = "none";
        };
      }

      function EditTask(id) {
        if (id.className == "fa fa-edit") {
          // codes for going to edit mode
          var parent = id.parentElement;
          //parent.className = "editMode";
          var input = parent.querySelector("input[type='text']");
          var label = parent.querySelector("label");
          label.classList.toggle("editMode");
          input.classList.toggle("savedMode");
          input.value = label.innerText;
          var edit = parent.querySelector(".fa-edit");
          //edit.className = "saveButn";
          edit.className = "fa fa-save";
        } else if (id.className == "fa fa-save") {
          // codes for saving
          var parent = id.parentElement;
          var input = parent.querySelector("input[type='text']");
          var label = parent.querySelector("label");
          label.innerText = input.value;
          label.classList.toggle("editMode");
          input.classList.toggle("savedMode");
          //input.classList.toggle("savedMode");
          var save = parent.querySelector(".fa-save");
          save.className = "fa fa-edit";
        }
      }

      // following codes can also be used instead of above codes for EditTask but the onclick="EditTask(this)" should be removed from HTML editButn buttons.
      /* var editButns = document.getElementsByClassName("editButn");
      for (j=0; j<editButns.length; j++) {  
        editButns[j].onclick = function() {    
          if (this.innerText == "E") {      
            // codes for going to edit mode      
            var parent = this.parentElement;      
            //parent.className = "editMode";      
            var input = parent.querySelector("input[type='text']");      
            var label = parent.querySelector("label");      
            label.classList.toggle("editMode");      
            input.classList.toggle("savedMode");      
            input.value = label.innerText;      
            var edit = parent.querySelector("span[class='editButn']");      
            //edit.className = "saveButn";      
            edit.innerText = "S";    
          } else if (this.innerText == "S") {      
            // codes for saving      
            var parent = this.parentElement;      
            var input = parent.querySelector("input[type='text']");      
            var label = parent.querySelector("label");      
            label.innerText = input.value;      
            label.classList.toggle("editMode");      
            input.classList.toggle("savedMode");      
            //input.classList.toggle("savedMode");      
            var save = parent.querySelector("span[class='editButn']");      
            save.innerText = "E";    
          }  
        }
      }  */
  
      function checking(checkBox, parentList) {
        //listItem = id.parentElement;
        //list = listItem.parentElement;
        if (parentList.id == "incomplete") {
          // codes for going from incomplete to completed
          var listItem = checkBox.parentElement;
          destinationList = document.getElementById("completed");
          destinationList.appendChild(listItem);
        } else if (parentList.id == "completed") {
          // codes for returning from completed to incomplete
          var listItem = checkBox.parentElement;
          destinationList = document.getElementById("incomplete");
          destinationList.appendChild(listItem);
        }
      }

      function addTask() {
        var inputTask = document.getElementById("inputTask").value;
        if (inputTask == "") {
          alert("Please enter a task!");
        } else {
          var li = document.createElement("li");
          var checkBox = document.createElement("input");
          checkBox.type = "checkBox";
          checkBox.className = "checkBox";
          var label = document.createElement("label");
          label.innerText = inputTask;
          var text = document.createElement("input");
          text.type = "text";
          text.className = "savedMode";
          var closeButn = document.createElement("i");
          closeButn.className = "fa fa-close";
          //closeButn.innerText = "X";
          var editButn = document.createElement("i");
          editButn.className = "fa fa-edit";
          //editButn.innerText = "E";
          li.appendChild(checkBox); li.appendChild(label); li.appendChild(text);
          li.appendChild(closeButn); li.appendChild(editButn);
          var last = document.getElementById("incomplete").appendChild(li);
          closeButn.onclick = function() {
            var parent = this.parentElement;
            parent.style.display = "none";
          };
    
         editButn.onclick = function() {EditTask(this)};
         checkBox.onchange = function() {checking(this, this.parentElement.parentElement)};
      }   
      document.getElementById("inputTask").value = "";
    }

    //Extension: add tool tips to add, close, edit and save buttons
  </script>


  </body>
  
</html>